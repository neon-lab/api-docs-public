<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Neon Labs API Documentation</title>
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
        <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <link rel="icon" type="image/png" href="images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="images/favicon-16x16.png" sizes="16x16" />
        <link href='css/typography.css' media='screen' rel='stylesheet' type='text/css'/>
        <link href='css/reset.css' media='screen' rel='stylesheet' type='text/css'/>
        <link href='css/screen.css' media='screen' rel='stylesheet' type='text/css'/>
        <link href='css/reset.css' media='print' rel='stylesheet' type='text/css'/>
        <link href='css/print.css' media='print' rel='stylesheet' type='text/css'/>
        <script src='lib/jquery-1.8.0.min.js' type='text/javascript'></script>
        <script src='lib/jquery.slideto.min.js' type='text/javascript'></script>
        <script src='lib/jquery.wiggle.min.js' type='text/javascript'></script>
        <script src='lib/jquery.ba-bbq.min.js' type='text/javascript'></script>
        <script src='lib/handlebars-2.0.0.js' type='text/javascript'></script>
        <script src='lib/underscore-min.js' type='text/javascript'></script>
        <script src='lib/backbone-min.js' type='text/javascript'></script>
        <script src='swagger-ui.js' type='text/javascript'></script>
        <script src='lib/highlight.7.3.pack.js' type='text/javascript'></script>
        <script src='lib/jsoneditor.min.js' type='text/javascript'></script>
        <script src='lib/marked.js' type='text/javascript'></script>
        <script src='lib/swagger-oauth.js' type='text/javascript'></script>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href='css/customstyle.css' rel='stylesheet' type='text/css'/>

  <!-- Some basic translations -->
  <!-- <script src='lang/translator.js' type='text/javascript'></script> -->
  <!-- <script src='lang/ru.js' type='text/javascript'></script> -->
  <!-- <script src='lang/en.js' type='text/javascript'></script> -->

  <script type="text/javascript">
    var NEON_LABS_AUTHENTICATION_ENDPOINT = "https://auth.neon-lab.com/api/v2/authenticate";
    var ACCESS_TOKEN_FROM_AUTHENTICATION_PAYLOAD = function(data) { return data.access_token; };
    var API_DOCUMENATION_ENDPOINT = "https://s3.amazonaws.com/neon-api-docs/public_specs/cmsapiv2_public.json";
    var API_DOCUMENATION_ENDPOINT2 = "https://s3.amazonaws.com/neon-api-docs/public_specs/auth_public.json";
    var APIDOCARRAY = [API_DOCUMENATION_ENDPOINT, API_DOCUMENATION_ENDPOINT2];
    
    $(function () {
        for (var i = 0; i < APIDOCARRAY.length; i++) {
        APIDOCARRAY[i]

      // Pre load translate...
      if(window.SwaggerTranslator) {
        window.SwaggerTranslator.translate();
      }
      window.swaggerUi = new SwaggerUi({
        url: APIDOCARRAY[i],
        dom_id: "swagger-ui-container-" + i,
        supportedSubmitMethods: ['get', 'post', 'put', 'delete', 'patch'],
        onComplete: function(swaggerApi, swaggerUi){
          if(typeof initOAuth == "function") {
            initOAuth({
              clientId: "your-client-id",
              clientSecret: "your-client-secret-if-required",
              realm: "your-realms",
              appName: "your-app-name",
              scopeSeparator: ",",
              additionalQueryStringParams: {}
            });
          }

          if(window.SwaggerTranslator) {
            window.SwaggerTranslator.translate();
          }

          $('pre code').each(function(i, e) {
            hljs.highlightBlock(e)
          });

          addApiKeyAuthorization();
        },
        onFailure: function(data) {
          log("Unable to Load SwaggerUI");
        },
        docExpansion: "none",
        jsonEditor: false,
        apisSorter: "alpha",
        defaultModelRendering: 'schema',
        showRequestHeaders: false
      });

      function processApiKeyAuthorization(key) {
        if(key && key.trim() != "") {
            var apiKeyAuth = new SwaggerClient.ApiKeyAuthorization("token", key, "query");
            window.swaggerUi.api.clientAuthorizations.add("api_key", apiKeyAuth);
            log("added key " + key);
        }
      }

      function addApiKeyAuthorization(){
        var key = encodeURIComponent($('#input_apiKey')[0].value);
        return processApiKeyAuthorization(key);
      }

      var retrieveAccessToken = function(payload, callback) {
        $.ajax({
          url: NEON_LABS_AUTHENTICATION_ENDPOINT,
          type: "POST",
          data: JSON.stringify(payload),
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function(data) {
            return callback(ACCESS_TOKEN_FROM_AUTHENTICATION_PAYLOAD(data));
          }
        });
      }

      $("#api_selector").submit(function(event) {
        var $signInForm = $(this);
        event.preventDefault();
        event.stopPropagation();

        var formData = $signInForm.serializeArray();
        var data = {};
        $(formData).each(function(index, obj) {
          data[obj.name] = obj.value;
        });

        retrieveAccessToken(data, processApiKeyAuthorization);
      });

      // if you have an apiKey you would like to pre-populate on the page for demonstration purposes...
      /*
        var apiKey = "myApiKeyXXXX123456789";
        $('#input_apiKey').val(apiKey);
      */

      window.swaggerUi.load();

      function log() {
        if ('console' in window) {
          console.log.apply(console, arguments);
        }
      }
  }
  });

  </script>

</head>
    <body class="swagger-section">
        <div id='header'>
          <div class="swagger-ui-wrap">
            <a id="logo" href="http://neon-lab.com">Neon</a>
            <form id="api_selector">
              <div class='input'><input placeholder="username" id="username" name="username" type="text"/></div>
              <div class='input'><input placeholder="password" id="password" name="password" type="password"/></div>
              <div class='input'><input id="sign_in" type="submit" value="Sign In"/></div>
            </form>
          </div>
        </div>            
        <div class="container-fluid">
            <div class="row">
                <nav class="col-sm-2">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <ul class="nav nav-pills nav-stacked">
                                <li class="active"><a class="tabpill" data-toggle="pill" href="#WELCOME">Welcome!</a></li>
                                <li><a class="tabpill" data-toggle="pill" href="#AUTHFLOW">Authorization Flow</a></li>
                                <li><a class="tabpill" data-toggle="pill" href="#AUTHAPI">Authorization API</a></li>
                                <li><a class="tabpill" data-toggle="pill" href="#CMSAPI">CMS API</a></li>
                            </ul>
                        </div>
                    </div>
                </nav>
            <div class="col-sm-8  tab-content panel-group">
                <div id="WELCOME" class="tab-pane fade in active">
                    <div class="swagger-ui-wrap">
                        <h1>Welcome!</h1>
                        <p>This is the documentation for <a href="https://neon-lab.com">Neon's</a> API. You can click around to browse the endpoints, or you can enter your username and password and make live requests against your actual data.  The primary host is https://services.neon-images.com. </p>
                    </div>
                </div>
                    <div id="AUTHFLOW" class="tab-pane fade">
                        <div class="swagger-ui-wrap">
                            <h1>Authorization flow</h1>
                            <p>You've got your username and password and you're ready to access the API. This live documentation manages tokens for you, but you'll generally need to fetch, store, and refresh your own tokens to use Neon.</p>
                            <p>You'll use your username and password to request a long-lived refresh_token. You can use that <code>refresh_token</code> to request a short-lived <code>access_token</code>. Your requests to the API are authenticated by sending along your access token.</p>
                            <p>Each access token expires after about 12 minutes, so you'll want to store the refresh token so you can acquire new access tokens.</p>
                            <p>The authentication endpoint is different from the API endpoint. It uses a different base URL (https://auth.neon-lab.com) and only responds to requests over HTTPS.</p>
                            <h2>Call Flow</h2>
                            <p>A username and password will be supplied to you when your customer account is created.</p>
                            <p>Use these to call:</p>
                            <pre>
                            POST https://auth.neon-lab.com/api/v2/authenticate

                            {
                            "username": "yourusername",
                            "password": "yourpass"
                            }
                            </pre>

                            <p>An <code>access_token</code>/<code>refresh_token</code> pair is passed back on success:</p>
                            <pre>
                            {
                            "access_token": "access_token",
                            "refresh_token": "refresh_token"
                            }
                            </pre>
                            <p>Passing the <code>access_token</code> to the API can be done in three different ways:</p>
                            <p>1. As the query_string parameter:</p>
                            <pre>
                            /a123/integrations/brightcove?integration_id=15add06a5cc511e5b7da00904c0df43e&token=access_token
                            </pre>
                            <p>2. In the JSON-encoded body parameters:</p>
                            <pre>
                            /api/v2/pvmprjg44t5x7cqcrsw0i6tn/integrations/brightcove

                            {
                            "publisher_id": "123badf",
                            "token": "access_token"
                            }
                            </pre>

                            <p>3. As an <code>Authorization: Bearer</code> header:</p>
                            <pre>
                            HEADER:

                            Authorization: Bearer access_token
                            /a123/integrations/brightcove?integration_id=15add06a5cc511e5b7da00904c0df43e
                            </pre>
                        </div>
                    </div>
                    <div id="AUTHAPI" class="tab-pane fade">
                            <div id="message-bar" class="swagger-ui-wrap" data-sw-translate>&nbsp;</div>  
                            <div id="swagger-ui-container-1" class="swagger-ui-wrap"></div>      
                    </div>
                    <div id="CMSAPI" class="tab-pane fade">
                            <div id="message-bar" class="swagger-ui-wrap" data-sw-translate>&nbsp;</div>
                            <div id="swagger-ui-container-0" class="swagger-ui-wrap"></div>
                    </div>
              </div>
          </div>
      </div>
    </body>
</html>
